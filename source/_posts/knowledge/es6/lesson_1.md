---
title: ES6-变量
categories: javascript
tags:
    - javascript
    - ES6
---



## let 和 const

`let`声明变量，类似于`var`，但是`let`有作用域的概念。
`const` 声明常量，一旦声明后，不可改变。`const` 声明后要立马初始化。

**作用域**

作用域顾名思义就是只有在某个区域内起作用。`let` 就只能在其作用域中起作用。

``` javascript 
{
  let a = 10;
  var b = 1;
}

a // ReferenceError: a is not defined.
b // 1
```
**变量提升**

`var` 命令会发生“变量提升”现象，即变量可以在声明之前使用，值为undefined。

`let` 定义的变量如果在声明之前使用会报错。

**暂时性死区**

如果区块中存在`let`和`const`命令，这个区块对这些命令声明的变量，从一开始就形成了封闭作用域（暂时性死区）。凡是在声明之前就使用这些变量，就会报错。

**重复声明**

`let`不允许在相同作用域内，重复声明同一个变量。

**const本质**

`const`实际上保证的，并不是变量的值不得改动，而是变量指向的那个内存地址所保存的数据不得改动。

对于简单类型的数据（数值、字符串、布尔值），值就保存在变量指向的那个内存地址，因此等同于常量。但对于复合类型的数据（主要是对象和数组），变量指向的内存地址，保存的只是一个指向实际数据的指针，`const`只能保证这个指针是固定的（即总是指向另一个固定的地址），至于它指向的数据结构是不是可变的，就完全不能控制了。

## global对象

顶层对象，在浏览器环境指的是`window`对象，在 `Node` 指的是`global`对象。

ES5 之中，顶层对象的属性与全局变量是等价的。
``` javascript
window.a = 1;
a // 1

a = 2;
window.a // 2
```

- 为了保持兼容性，`var`命令和`function`命令声明的全局变量，依旧是顶层对象的属性；
- `let`命令、`const`命令、class命令声明的全局变量，不属于顶层对象的属性
